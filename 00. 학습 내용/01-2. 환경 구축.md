## 2.1 ì „ì²´ êµ¬ì„± ê°œìš”

| êµ¬ì„±ìš”ì†Œ       | ì—­í•                           | í¬íŠ¸ | ì„¤ëª…            |
| -------------- | ----------------------------- | ---- | --------------- |
| Elasticsearch  | í•µì‹¬ ë°ì´í„° ì €ì¥ ë° ê²€ìƒ‰ ì—”ì§„ | 9200 | REST API í¬íŠ¸   |
| Kibana         | ì‹œê°í™”, Dev Tools ì½˜ì†”        | 5601 | ì›¹ ëŒ€ì‹œë³´ë“œ     |
| Postman / curl | REST API í…ŒìŠ¤íŠ¸               | -    | í´ë¼ì´ì–¸íŠ¸ ë„êµ¬ |

êµ¬ì¡° ìš”ì•½:

```
[Postman or curl] â†’ [Kibana Dev Tools] â†’ [Elasticsearch Container]
```

## 2.2 ì‚¬ì „ ì¤€ë¹„

### âœ… í•„ìˆ˜ ì„¤ì¹˜ ëª©ë¡

- Docker & Docker Compose
- í¬íŠ¸ 9200, 5601 ê°œë°© í™•ì¸ (ë¡œì»¬ ì¶©ëŒ ë°©ì§€)
- RAM ìµœì†Œ 4GB ì´ìƒ (Elasticsearch ì»¨í…Œì´ë„ˆê°€ ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ì‚¬ìš©)

## 2.3 Dockerë¡œ Elasticsearch ì„¤ì¹˜

### ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
00-elasticsearch-test/
 â”œâ”€â”€ docker-compose.yml
 â””â”€â”€ data/
```

### ğŸ§¾ docker-compose.yml ì˜ˆì‹œ

```yaml
version: "3.8"

services:
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.15.0
    container_name: elasticsearch
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
      - ES_JAVA_OPTS=-Xms1g -Xmx1g
    ports:
      - "9200:9200"
    volumes:
      - ./data:/usr/share/elasticsearch/data

  kibana:
    image: docker.elastic.co/kibana/kibana:8.15.0
    container_name: kibana
    ports:
      - "5601:5601"
    environment:
      - ELASTICSEARCH_HOSTS=http://elasticsearch:9200
    depends_on:
      - elasticsearch
```

ğŸ’¡ **Tip**

> ë³´ì•ˆ ëª¨ë“ˆ(xpack.security)ì„ êº¼ì„œ í•™ìŠµ í™˜ê²½ì„ ë‹¨ìˆœí™”í–ˆìŠµë‹ˆë‹¤.ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì‚¬ìš©ì ì¸ì¦ ë° TLS ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

### ğŸš€ ì‹¤í–‰ ëª…ë ¹ì–´

```bash
docker compose up -d
docker ps
```

![image-20251015231055679](assets/image-20251015231055679.png)

## 2.4 ì •ìƒ ë™ì‘ í™•ì¸

### ğŸ§© Elasticsearch REST API í…ŒìŠ¤íŠ¸

```bash
curl -X GET "<http://localhost:9200>"
```

ì‘ë‹µ ê²°ê³¼ :

```json
{
  "name" : "8ba1f317e141",
  "cluster_name" : "docker-cluster",
  "cluster_uuid" : "R9PEczqeTx6PVNEiaeQXsQ",
  "version" : {
    "number" : "8.15.0",
    "build_flavor" : "default",
    "build_type" : "docker",
    "build_hash" : "1a77947f34deddb41af25e6f0ddb8e830159c179",
    "build_date" : "2024-08-05T10:05:34.233336849Z",
    "build_snapshot" : false,
    "lucene_version" : "9.11.1",
    "minimum_wire_compatibility_version" : "7.17.0",
    "minimum_index_compatibility_version" : "7.0.0"
  },
  "tagline" : "You Know, for Search"
}
```

ê·¸ë¦¬ê³  Kibanaê¹Œì§€ ì •ìƒì ìœ¼ë¡œ ì˜¬ë¼ì™”ë‹¤.

## 2.5 Kibana ì ‘ì† ë° í™œìš©

- ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†: ğŸ‘‰ http://localhost:5601
- ì¢Œì¸¡ ë©”ë‰´ â†’ **Dev Tools** ì„ íƒ
- Kibana ì½˜ì†”ì—ì„œ ë‹¤ìŒ ëª…ë ¹ ì‹¤í–‰:

```bash
GET /
```

![image-20251015231234155](assets/image-20251015231234155.png)

### âœ¨ Kibanaë¡œ í•  ìˆ˜ ìˆëŠ” ê²ƒ

- Elasticsearch API í…ŒìŠ¤íŠ¸ (Dev Tools ì½˜ì†”)
- ì¸ë±ìŠ¤ ìƒì„± ë° ë°ì´í„° ê²€ìƒ‰
- ëŒ€ì‹œë³´ë“œ ì‹œê°í™” (ì¶”í›„ ë‹¨ê³„ì—ì„œ í™œìš©)

------

## 2.6 Postman ë˜ëŠ” curlì„ ì´ìš©í•œ API í…ŒìŠ¤íŠ¸

### ğŸ§° ì„ íƒ 1. Postman

- ìƒˆ ìš”ì²­ ìƒì„± â†’ `GET http://localhost:9200`
- ì‘ë‹µì´ JSONìœ¼ë¡œ í‘œì‹œë˜ë©´ ì—°ê²° ì„±ê³µ
- ì´í›„ CRUD ìš”ì²­(`PUT`, `GET`, `POST`, `DELETE`)ìœ¼ë¡œ ì‹¤ìŠµ ê°€ëŠ¥

```jsx
PUT <http://localhost:9200/products/_doc/1>
Content-Type: application/json

{
  "name": "ê³ ì–‘ì´ ì‚¬ë£Œ",
  "price": 12000
}
```

#### Postman í…ŒìŠ¤íŠ¸ ê²°ê³¼

- GET / 

```http
GET http://localhost:9200/
```
```json
{
    "name": "8ba1f317e141",
    "cluster_name": "docker-cluster",
    "cluster_uuid": "R9PEczqeTx6PVNEiaeQXsQ",
    "version": {
        "number": "8.15.0",
        "build_flavor": "default",
        "build_type": "docker",
        "build_hash": "1a77947f34deddb41af25e6f0ddb8e830159c179",
        "build_date": "2024-08-05T10:05:34.233336849Z",
        "build_snapshot": false,
        "lucene_version": "9.11.1",
        "minimum_wire_compatibility_version": "7.17.0",
        "minimum_index_compatibility_version": "7.0.0"
    },
    "tagline": "You Know, for Search"
}
```

- PUT /products/\_doc/1

```http
PUT localhost:9200/products/_doc/1
{
  "name": "ê³ ì–‘ì´ ì‚¬ë£Œ",
  "price": 12000
}
```
```json
{
    "_index": "products",
    "_id": "1",
    "_version": 5,
    "result": "updated",
    "_shards": {
        "total": 2,
        "successful": 1,
        "failed": 0
    },
    "_seq_no": 4,
    "_primary_term": 1
}
```

- GET /products/\_search?pretty
```http
GET /products/_search?pretty
{
    "query": {
      "match": {
        "name": "ê³ ì–‘ì´"
      }
    }
}
```
```json
{
    "took": 2,
    "timed_out": false,
    "_shards": {
        "total": 1,
        "successful": 1,
        "skipped": 0,
        "failed": 0
    },
    "hits": {
        "total": {
            "value": 1,
            "relation": "eq"
        },
        "max_score": 0.13353139,
        "hits": [
            {
                "_index": "products",
                "_id": "1",
                "_score": 0.13353139,
                "_source": {
                    "name": "ê³ ì–‘ì´ ì‚¬ë£Œ",
                    "price": 12000
                }
            }
        ]
    }
}
```