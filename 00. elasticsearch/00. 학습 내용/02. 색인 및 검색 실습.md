# 02. ìƒ‰ì¸ ë° ê²€ìƒ‰ ì‹¤ìŠµ



## 3.1 ì‹¤ìŠµ ê°œìš”

ì´ ì‹¤ìŠµì—ì„œëŠ” ë‹¤ìŒì„ ë‹¨ê³„ë³„ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.

| ë‹¨ê³„ | í•™ìŠµ ëª©í‘œ               | ì‚¬ìš© API                                          |
| ---- | ----------------------- | ------------------------------------------------- |
| 1ï¸âƒ£    | ì¸ë±ìŠ¤ ìƒì„±, í™•ì¸, ì‚­ì œ | `PUT`, `GET`, `DELETE /{index}`                   |
| 2ï¸âƒ£    | ë¬¸ì„œ CRUD (ë‹¨ê±´)        | `PUT`, `GET`, `POST`, `DELETE /{index}/_doc/{id}` |
| 3ï¸âƒ£    | ëŒ€ëŸ‰ ë°ì´í„° ì…ë ¥        | `_bulk` API                                       |
| 4ï¸âƒ£    | ê¸°ë³¸ ê²€ìƒ‰               | `_search` + `match`, `term`                       |
| 5ï¸âƒ£    | í•„í„°ë§ ë° ì •ë ¬          | `bool`, `filter`, `sort`                          |

## 3.2 ì¸ë±ìŠ¤ ìƒì„±, ì¡°íšŒ, ì‚­ì œ

Elasticsearchì—ì„œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ì „ì— **ì¸ë±ìŠ¤(index)** ë¥¼ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.
RDBMSë¡œ ì¹˜ë©´ â€œí…Œì´ë¸” ìƒì„±â€ ë‹¨ê³„ì— í•´ë‹¹í•©ë‹ˆë‹¤.

### ì¸ë±ìŠ¤ ìƒì„±

ìš”ì²­ :

```json
PUT /products
{
  "mappings": {
    "properties": {
      "name": { "type": "text" },
      "brand": { "type": "keyword" },
      "price": { "type": "integer" },
      "in_stock": { "type": "boolean" },
      "created_at": { "type": "date" }
    }
  }
}
```

ì„¤ëª…

- `text`: í˜•íƒœì†Œ ë¶„ì„ì´ í•„ìš”í•œ í•„ë“œ (ê²€ìƒ‰ìš©)
- `keyword`: ì •ë ¬Â·í•„í„°ìš© (ì •í™•í•œ ì¼ì¹˜ ë¹„êµ)
- `integer`, `boolean`, `date`: ìˆ«ì/ë…¼ë¦¬/ë‚ ì§œ íƒ€ì…

ì‘ë‹µ :

```json
{
  "acknowledged": true,
  "shards_acknowledged": true,
  "index": "products"
}
```

### ì¸ë±ìŠ¤ ëª©ë¡ í™•ì¸

```http
GET /_cat/indices?v
```

![Pasted image 20251016150131](assets/Pasted image 20251016150131.png)

#### â“ ì˜ë¬¸ì 

ìœ„ ê²°ê³¼ë¥¼ ë³´ë©´ products ì¸ë±ìŠ¤ì˜ ìƒíƒœ(health)ê°€ yellowë¼ê³  ì¶œë ¥ë˜ì—ˆë‹¤. ì´ëŠ” ì™œì¼ê¹Œ? ê·¸ê²ƒì€ pri/rep ì†ì„±ì„ ë³´ë©´ ì•Œ ìˆ˜ ìˆëŠ”ë°, 1ê³¼ 1ìœ¼ë¡œ í˜„ì¬ `primary shard` 1ê°œ, `replica shard` 1ê°œë¼ëŠ” ì˜ë¯¸ì´ë‹¤. ì¦‰, `elasticsearch`ì—ì„œ ìƒ¤ë“œëŠ” ë°˜ë“œì‹œ replicaë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•˜ëŠ”ë°, ìš°ë¦¬ê°€ ì•ì„œ ì§„í–‰í•œ [01-2. Elasticsearch êµ¬ì¶•](app://obsidian.md/01-2. Elasticsearch êµ¬ì¶•)ì˜ `docker-compose.yaml` íŒŒì¼ì„ ì°¸ê³ í•˜ë©´ `discovery.type=single-node`ë¼ê³  ëª…ì‹œí–ˆê³ , ë‹¨ì¼ ë…¸ë“œë¡œ êµ¬ì¶•ëœ ê²ƒì´ë‹¤.

ê·¸ëŸ¬ë‚˜ ì•ì„œ ì¸ë±ìŠ¤ ìƒì„± ë‹¨ê³„ì—ì„œëŠ” ëª…ì‹œí•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ê¸°ë³¸ ê°’ì¸ replica=1ë¡œ ì ìš©ë˜ì—ˆì„ ê²ƒì´ë‹¤. ê·¸ë˜ì„œ í˜„ì¬ ë‹¨ì¼ ë…¸ë“œì—ì„œëŠ” replicaë¥¼ ë°°ì¹˜í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— yellow ìƒíƒœë¡œ ì¶œë ¥ë˜ê³  ìˆë˜ ê²ƒì´ë‹¤.

##### í•´ê²°í•˜ê¸°

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹¤ìŠµ ìš©ìœ¼ë¡œ êµ¬ì¶•í•œ ë‹¨ì¼ ë…¸ë“œ í™˜ê²½ì„ 2ê°œ ë…¸ë“œ í™˜ê²½ìœ¼ë¡œ ë‹¤ì‹œ ë³€ê²½í•œë‹¤. ìˆ˜ì •ëœ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

> docker-compose.yaml

![image-20251016155722706](assets/image-20251016155722706.png)

ê·¸ë¦¬ê³  dockerë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•œë‹¤.

```sh
docker compose down
...
docker compose up -d
[+] Running 4/4
 âœ” Network 00-elasticsearch-test_elastic  Created                           
 âœ” Container es02                         Started                           
 âœ” Container es01                         Started                           
 âœ” Container kibana                       Started
 ...
```

(ì¤‘ê°„ì— í¬íŠ¸ ì¶©ëŒì´ ìˆì–´ ê¸°ì¡´ elasticsearch ì»¨í…Œì´ë„ˆë¥¼ ì™„ì „íˆ ì œê±°í–ˆë‹¤)

ì´í›„ ë‹¤ì‹œ indicesë¥¼ ì¡°íšŒí•˜ë‹ˆ ëª¨ë‘ pri/repê°€ 1/1ë¡œ í™•ì¸ë˜ì—ˆë‹¤.
![image-20251016155746878](assets/image-20251016155746878.png)

ê·¸ë¦¬ê³  ë‹¤ì‹œ productsë¥¼ ì¸ë±ì‹± í•˜ë‹ˆ, ë‹¤ìŒê³¼ ê°™ì´ green ìƒíƒœì¸ ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.
![image-20251016155754827](assets/image-20251016155754827.png)

### ğŸ§¨ ì¸ë±ìŠ¤ ì‚­ì œ

```bash
DELETE /products
```

(ì•ì„œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê³¼ì •ì—ì„œ ì´ë¯¸ ìˆ˜í–‰í•´ë´¤ê¸° ë•Œë¬¸ì— ì‚­ì œí•˜ì§€ ì•ŠëŠ”ë‹¤)

## 3.3 ë¬¸ì„œ ì¶”ê°€, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ (CRUD)

### ğŸ“ ë¬¸ì„œ ì¶”ê°€ (Index)

#### ê¸°ë³¸

ê¸°ë³¸ í˜•íƒœ (ìš”ì²­)

```json
PUT /products/_doc/1
{
  "name": "ê³ ì–‘ì´ ì‚¬ë£Œ",
  "brand": "ëƒ¥ëƒ¥í«",
  "price": 12000,
  "in_stock": true,
  "created_at": "2025-10-15"
}
```

(ì‘ë‹µ)
```json
{
  "_index": "products",
  "_id": "1",
  "_version": 1,
  "result": "created",
  "_shards": {
    "total": 2,
    "successful": 2,
    "failed": 0
  },
  "_seq_no": 0,
  "_primary_term": 1
}
```

(âœ… í™•ì¸ìš© ì¡°íšŒ - ì‘ë‹µ)
```json
GET /products/_search?pretty
{
    "query": {
      "match": {
        "name": "ê³ ì–‘ì´"
      }
    }
}
```
```json
{
  "took": 1,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 1,
      "relation": "eq"
    },
    "max_score": 0.2876821,
    "hits": [
      {
        "_index": "products",
        "_id": "1",
        "_score": 0.2876821,
        "_source": {
          "name": "ê³ ì–‘ì´ ì‚¬ë£Œ",
          "brand": "ëƒ¥ëƒ¥í«",
          "price": 12000,
          "in_stock": true,
          "created_at": "2025-10-15"
        }
      }
    ]
  }
}
```

#### ID ìë™ ìƒì„±

ID ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šê³  POSTë¡œ ìë™ ìƒì„±ë„ ê°€ëŠ¥í•˜ë‹¤ (ìš”ì²­)
```json
POST /products/_doc
{
  "name": "ê°•ì•„ì§€ ê°„ì‹",
  "brand": "ë©ìŠ¤íƒ€",
  "price": 8000,
  "in_stock": false,
  "created_at": "2025-10-15"
}
```

(ì‘ë‹µ)
```json
{
  "_index": "products",
  "_id": "mHW265kBOtbAsokx9iEz",
  "_version": 1,
  "result": "created",
  "_shards": {
    "total": 2,
    "successful": 2,
    "failed": 0
  },
  "_seq_no": 1,
  "_primary_term": 1
}
```

(âœ… í™•ì¸ìš© ì¡°íšŒ - ì‘ë‹µ)
```json
GET /products/_search?pretty
{
    "query": {
      "match": {
        "name": "ê°•ì•„ì§€"
      }
    }
}
```
```json
{
  "took": 2,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 1,
      "relation": "eq"
    },
    "max_score": 0.6931471,
    "hits": [
      {
        "_index": "products",
        "_id": "mHW265kBOtbAsokx9iEz",
        "_score": 0.6931471,
        "_source": {
          "name": "ê°•ì•„ì§€ ê°„ì‹",
          "brand": "ë©ìŠ¤íƒ€",
          "price": 8000,
          "in_stock": false,
          "created_at": "2025-10-15"
        }
      }
    ]
  }
}
```
ëŒ€ì‹  idê°’ì´ ì¼ë°˜ì ì¸ ì •ìˆ˜ê°€ ì•„ë‹ˆë‹¤.

### ğŸ” ë¬¸ì„œ ì¡°íšŒ (Get)

ì•ì„œ í™•ì¸í•  ë•ŒëŠ” `_search`ë¥¼ í™œìš©í–ˆëŠ”ë°, `_doc`ë¡œ ë¬¸ì„œ ë‹¨ìœ„ë¡œ ì¡°íšŒí•  ìˆ˜ë„ ìˆë‹¤.
```json
GET /products/_doc/1
```
```json
{
  "_index": "products",
  "_id": "1",
  "_version": 1,
  "_seq_no": 0,
  "_primary_term": 1,
  "found": true,
  "_source": {
    "name": "ê³ ì–‘ì´ ì‚¬ë£Œ",
    "brand": "ëƒ¥ëƒ¥í«",
    "price": 12000,
    "in_stock": true,
    "created_at": "2025-10-15"
  }
}
```

```json
GET /products/_doc/mHW265kBOtbAsokx9iEz
```
```json
{
  "_index": "products",
  "_id": "mHW265kBOtbAsokx9iEz",
  "_version": 1,
  "_seq_no": 1,
  "_primary_term": 1,
  "found": true,
  "_source": {
    "name": "ê°•ì•„ì§€ ê°„ì‹",
    "brand": "ë©ìŠ¤íƒ€",
    "price": 8000,
    "in_stock": false,
    "created_at": "2025-10-15"
  }
}
```

### ğŸ”§ ë¬¸ì„œ ìˆ˜ì • (Update)

ë‹¤ìŒì€ ë¬¸ì„œ ìˆ˜ì •ì´ë‹¤. POSTë¥¼ ì´ìš©í•˜ë©° `_udpate` APIë¡œ ìš”ì²­í•œë‹¤.
```json
POST /products/_update/1
{
  "doc": {
    "price": 11000
  }
}
```
(ì‘ë‹µ ê²°ê³¼)
```json
{
  "_index": "products",
  "_id": "1",
  "_version": 2,
  "result": "updated",
  "_shards": {
    "total": 2,
    "successful": 2,
    "failed": 0
  },
  "_seq_no": 2,
  "_primary_term": 1
}
```

(âœ… í™•ì¸ìš© ì¡°íšŒ - ì‘ë‹µ)
```json
GET /products/_doc/1
```
```json
{
  "_index": "products",
  "_id": "1",
  "_version": 2,
  "_seq_no": 2,
  "_primary_term": 1,
  "found": true,
  "_source": {
    "name": "ê³ ì–‘ì´ ì‚¬ë£Œ",
    "brand": "ëƒ¥ëƒ¥í«",
    "price": 11000,
    "in_stock": true,
    "created_at": "2025-10-15"
  }
}
```

## 3.4 ëŒ€ëŸ‰ ë°ì´í„° ì…ë ¥ (Bulk API)

ëŒ€ëŸ‰ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ìƒ‰ì¸í•  ë•ŒëŠ” `_bulk` APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í˜•ì‹ì€ **ëª…ë ¹ í–‰ + ë°ì´í„° í–‰** ìŒìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.
```json
POST /_bulk
{ "index": { "_index": "products", "_id": "1" } }
{ "name": "ê³ ì–‘ì´ ì¥ë‚œê°", "brand": "ëƒ¥ëƒ¥í«", "price": 22000, "in_stock": true }
{ "index": { "_index": "products", "_id": "2" } }
{ "name": "ê°•ì•„ì§€ ëª©ì¤„", "brand": "ë©ìŠ¤íƒ€", "price": 16000, "in_stock": false }
{ "index": { "_index": "products", "_id": "3" } }
{ "name": "ê³ ì–‘ì´ ìº£íƒ€ì›Œ", "brand": "ëƒ¥ëƒ¥í«", "price": 55000, "in_stock": true }

```
> âš ï¸ ì£¼ì˜: `_bulk` ìš”ì²­ì˜ ê° ì¤„ì€ JSON í•˜ë‚˜ì”©ì´ë©°, ë§ˆì§€ë§‰ ì¤„ ëì— ì‰¼í‘œ(,)ê°€ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤.  
> Kibana Dev Toolsì—ì„œëŠ” ì—¬ëŸ¬ ì¤„ ê·¸ëŒ€ë¡œ ë¶™ì—¬ ë„£ê¸° ê°€ëŠ¥.

(ì‘ë‹µ)
```json
{
  "errors": false,
  "took": 2588434,
  "items": [
    {
      "index": {
        "_index": "products",
        "_id": "1",
        "_version": 3,
        "result": "updated",
        "_shards": {
          "total": 2,
          "successful": 2,
          "failed": 0
        },
        "_seq_no": 3,
        "_primary_term": 1,
        "status": 200
      }
    },
    {
      "index": {
        "_index": "products",
        "_id": "2",
        "_version": 1,
        "result": "created",
        "_shards": {
          "total": 2,
          "successful": 2,
          "failed": 0
        },
        "_seq_no": 4,
        "_primary_term": 1,
        "status": 201
      }
    },
    {
      "index": {
        "_index": "products",
        "_id": "3",
        "_version": 1,
        "result": "created",
        "_shards": {
          "total": 2,
          "successful": 2,
          "failed": 0
        },
        "_seq_no": 5,
        "_primary_term": 1,
        "status": 201
      }
    }
  ]
}
```

(âœ… í™•ì¸ìš© ì¡°íšŒ - ì‘ë‹µ)
```json
GET /products/_search?pretty
{
    "query": {
      "match": {
        "name": "ê³ ì–‘ì´"
      }
    }
}
```
```json
{
  "took": 13,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 2,
      "relation": "eq"
    },
    "max_score": 0.6931471,
    "hits": [
      {
        "_index": "products",
        "_id": "1",
        "_score": 0.6931471,
        "_source": {
          "name": "ê³ ì–‘ì´ ì¥ë‚œê°",
          "brand": "ëƒ¥ëƒ¥í«",
          "price": 22000,
          "in_stock": true
        }
      },
      {
        "_index": "products",
        "_id": "3",
        "_score": 0.6931471,
        "_source": {
          "name": "ê³ ì–‘ì´ ìº£íƒ€ì›Œ",
          "brand": "ëƒ¥ëƒ¥í«",
          "price": 55000,
          "in_stock": true
        }
      }
    ]
  }
}
```

ë¬¸ì„œ ê°œìˆ˜ í™•ì¸ (ìš”ì²­)
```json
GET /products/_count
```
(ì‘ë‹µ)
```json
{
  "count": 4,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  }
}
```

## 3.5 ê°„ë‹¨í•œ ê²€ìƒ‰ ì¿¼ë¦¬

Elasticsearchì—ì„œ ê²€ìƒ‰ì€ `_search` ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

### ğŸ” Match Query (ì „ë¬¸ ê²€ìƒ‰)

(ìš”ì²­)
```json
GET /products/_search
{
  "query": {
    "match": {
      "name": "ê³ ì–‘ì´"
    }
  }
}
```
â†’ í˜•íƒœì†Œ ë¶„ì„ì„ ê±°ì³ â€œê³ ì–‘ì´â€, â€œì‚¬ë£Œâ€ ë“± ìœ ì‚¬ ë‹¨ì–´ë„ ê²€ìƒ‰ ê°€ëŠ¥

(ì‘ë‹µ)
```json
{
  "took": 2,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 2,
      "relation": "eq"
    },
    "max_score": 0.53899646,
    "hits": [
      {
        "_index": "products",
        "_id": "1",
        "_score": 0.53899646,
        "_source": {
          "name": "ê³ ì–‘ì´ ì¥ë‚œê°",
          "brand": "ëƒ¥ëƒ¥í«",
          "price": 22000,
          "in_stock": true
        }
      },
      {
        "_index": "products",
        "_id": "3",
        "_score": 0.53899646,
        "_source": {
          "name": "ê³ ì–‘ì´ ìº£íƒ€ì›Œ",
          "brand": "ëƒ¥ëƒ¥í«",
          "price": 55000,
          "in_stock": true
        }
      }
    ]
  }
}
```

### ğŸ¯ Term Query (ì •í™• ì¼ì¹˜ ê²€ìƒ‰)

(ìš”ì²­)
```json
GET /products/_search
{
  "query": {
    "term": {
      "brand": "ë©ìŠ¤íƒ€"
    }
  }
}
```
â†’ `keyword` íƒ€ì… í•„ë“œì—ì„œë§Œ ì •í™• ì¼ì¹˜ ë¹„êµ ê°€ëŠ¥  
â†’ â€œë©ìŠ¤íƒ€â€ ë¸Œëœë“œì˜ ëª¨ë“  ë¬¸ì„œë¥¼ ì¡°íšŒ

(ì‘ë‹µ)
```json
{
  "took": 2,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 2,
      "relation": "eq"
    },
    "max_score": 0.87546873,
    "hits": [
      {
        "_index": "products",
        "_id": "mHW265kBOtbAsokx9iEz",
        "_score": 0.87546873,
        "_source": {
          "name": "ê°•ì•„ì§€ ê°„ì‹",
          "brand": "ë©ìŠ¤íƒ€",
          "price": 8000,
          "in_stock": false,
          "created_at": "2025-10-15"
        }
      },
      {
        "_index": "products",
        "_id": "2",
        "_score": 0.87546873,
        "_source": {
          "name": "ê°•ì•„ì§€ ëª©ì¤„",
          "brand": "ë©ìŠ¤íƒ€",
          "price": 16000,
          "in_stock": false
        }
      }
    ]
  }
}
```

## 3.6 í•„í„°ë§ê³¼ ì •ë ¬ ê¸°ì´ˆ

ê²€ìƒ‰ ì¿¼ë¦¬ì™€ í•¨ê»˜ `bool`, `filter`, `sort` ë¥¼ ì¡°í•©í•˜ë©´ ì‹¤ë¬´í˜• ì¿¼ë¦¬ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### âœ… í•„í„°ë§

(ìš”ì²­)
```json
GET /products/_search
{
  "query": {
    "bool": {
      "must": { "match": { "brand": "ëƒ¥ëƒ¥í«" } },
      "filter": { "range": { "price": { "lte": 30000 } } }
    }
  }
}
```
â†’ â€œëƒ¥ëƒ¥í«â€ ë¸Œëœë“œ ì¤‘, ê°€ê²©ì´ 30,000 ì´í•˜ì¸ ìƒí’ˆë§Œ í•„í„°ë§

(ì‘ë‹µ)
```json
{
  "took": 1,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 1,
      "relation": "eq"
    },
    "max_score": 0.53899646,
    "hits": [
      {
        "_index": "products",
        "_id": "1",
        "_score": 0.53899646,
        "_source": {
          "name": "ê³ ì–‘ì´ ì¥ë‚œê°",
          "brand": "ëƒ¥ëƒ¥í«",
          "price": 22000,
          "in_stock": true
        }
      }
    ]
  }
}
```

**íŠ¹ì§•**

- `filter`ëŠ” ì ìˆ˜(relevance score)ë¥¼ ê³„ì‚°í•˜ì§€ ì•Šì•„ ë¹ ë¦„
  
- ìºì‹±ë˜ì–´ ì„±ëŠ¥ì—ë„ ìœ ë¦¬

---

### ğŸ§­ ì •ë ¬

(ìš”ì²­)
```json
GET /products/_search
{
  "query": { "match_all": {} },
  "sort": [
    { "price": "asc" }
  ]
}
```
â†’ ì „ì²´ ìƒí’ˆì„ ê°€ê²© ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬

```json
{
  "took": 1,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped": 0,
    "failed": 0
  },
  "hits": {
    "total": {
      "value": 4,
      "relation": "eq"
    },
    "max_score": null,
    "hits": [
      {
        "_index": "products",
        "_id": "mHW265kBOtbAsokx9iEz",
        "_score": null,
        "_source": {
          "name": "ê°•ì•„ì§€ ê°„ì‹",
          "brand": "ë©ìŠ¤íƒ€",
          "price": 8000,
          "in_stock": false,
          "created_at": "2025-10-15"
        },
        "sort": [
          8000
        ]
      },
      {
        "_index": "products",
        "_id": "2",
        "_score": null,
        "_source": {
          "name": "ê°•ì•„ì§€ ëª©ì¤„",
          "brand": "ë©ìŠ¤íƒ€",
          "price": 16000,
          "in_stock": false
        },
        "sort": [
          16000
        ]
      },
      {
        "_index": "products",
        "_id": "1",
        "_score": null,
        "_source": {
          "name": "ê³ ì–‘ì´ ì¥ë‚œê°",
          "brand": "ëƒ¥ëƒ¥í«",
          "price": 22000,
          "in_stock": true
        },
        "sort": [
          22000
        ]
      },
      {
        "_index": "products",
        "_id": "3",
        "_score": null,
        "_source": {
          "name": "ê³ ì–‘ì´ ìº£íƒ€ì›Œ",
          "brand": "ëƒ¥ëƒ¥í«",
          "price": 55000,
          "in_stock": true
        },
        "sort": [
          55000
        ]
      }
    ]
  }
}
```

## 3.7 ì‹¤ìŠµ ì¤‘ ìœ ìš©í•œ ëª…ë ¹ì–´

| ëª©ì                   | ëª…ë ¹ì–´                           |
| --------------------- | -------------------------------- |
| ì¸ë±ìŠ¤ ë§¤í•‘ êµ¬ì¡° í™•ì¸ | `GET /products/_mapping`         |
| ì¸ë±ìŠ¤ ì„¤ì • í™•ì¸      | `GET /products/_settings`        |
| ì „ì²´ ë¬¸ì„œ ë³´ê¸°        | `GET /products/_search?size=100` |
| ìƒ‰ì¸ ì‚­ì œ             | `DELETE /products`               |

## 3.8 ë§ˆë¬´ë¦¬ ì •ë¦¬

ì´ë²ˆ ë‹¨ê³„ì—ì„œ ë‹¤ë£¬ ê¸°ëŠ¥ë“¤ì€ **Elasticsearchì˜ ê¸°ë³¸ CRUD ë° ê²€ìƒ‰ íë¦„ì˜ í•µì‹¬**ì…ë‹ˆë‹¤.

| ê¸°ëŠ¥             | ìš”ì•½                  | ì˜ˆì‹œ API                       |
| ---------------- | --------------------- | ------------------------------ |
| ì¸ë±ìŠ¤ ìƒì„±/ì‚­ì œ | ë°ì´í„° ì €ì¥ ê³µê°„ ê´€ë¦¬ | `PUT /index`, `DELETE /index`  |
| ë¬¸ì„œ CRUD        | ë‹¨ê±´ ë°ì´í„° ê´€ë¦¬      | `PUT`, `GET`, `POST`, `DELETE` |
| Bulk             | ëŒ€ëŸ‰ ë°ì´í„° ì‚½ì…      | `POST /_bulk`                  |
| Match/Term       | ê²€ìƒ‰ì˜ ê¸°ë³¸           | `match`, `term`                |
| Filter/Sort      | ì‹¤ë¬´í˜• ê²€ìƒ‰           | `bool`, `filter`, `sort`       |
